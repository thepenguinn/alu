\ctikzsubcircuitdef{sctkglvlsrlatch} {
    s, r, q, qbar,
    bs, br, bq, bqbar%
} {
    coordinate (#1-q)
    %%
    ++(-1,0)
    node (#1-nor1) [nor port, anchor = out] {}
    %%
    (#1-nor1.in 2)
    ++(0,-3)
    %%
    node (#1-nor2) [nor port, anchor = in 1] {}
    %%
    %% Markings for cross coupling
    %%
    ($(#1-nor1.in 2)!0.50!(#1-nor2.in 1)$)
    ++(-0.75,0)
    coordinate (#1-invrt)
    %%
    (#1-nor1.out)
    ++(0.5,0)
    coordinate (#1-outvrt)
    %%
    (#1-nor1.in 2)
    coordinate (#1-ccfbvrt)
    %%
    (#1-nor1.in 2-|#1-ccfbvrt)
    ++ (0,-1.25)
    coordinate (#1-ccfbabove)
    %%
    (#1-nor2.in 1-|#1-ccfbabove)
    ++ ($(#1-nor1.in 2-|#1-ccfbvrt)-(#1-ccfbabove)$)
    coordinate (#1-ccfbbelow)
    %%
    %%
    %% Drawing the cross coupling
    %%
    (#1-nor1.in 2)
    \constcornerleft {(#1-nor2.in 1-|#1-invrt)}
    \varcornerdownright {(#1-ccfbbelow)}
    \constcornerright {(#1-nor2.out-|#1-outvrt)}
    -- (#1-nor2.out-|#1-outvrt)
    %%
    (#1-nor2.in 1)
    \constcornerleft {(#1-nor1.in 2-|#1-invrt)}
    \varcornerupright {(#1-ccfbabove)}
    \constcornerright {(#1-nor1.out-|#1-outvrt)}
    -- (#1-nor1.out-|#1-outvrt)
    %%
    %% Drawing outputs
    %%
    (#1-nor1.out)
    -- (#1-q)
    %%
    (#1-nor2.out)
    -- (#1-nor2.out-|#1-q)
    coordinate (#1-qbar)
    %%
    %% Drawing inputs
    %%
    (#1-nor1.in 1)
    -- ++(-1,0)
    coordinate (#1-r)
    %%
    (#1-nor2.in 2)
    -- (#1-nor2.in 2-|#1-r)
    coordinate (#1-s)
    %%
    %% (#1-nor1.north) isn't working for some reason in markgeocoordinate
    %% while passing it as a argument
    %%
    (#1-nor1.north) coordinate (#1-north)
    (#1-nor2.south) coordinate (#1-south)
    %%
    \glvlmarkcoordinate {#1} {s} {(1,0)}
    \glvlmarkcoordinate {#1} {r} {(1,0)}
    \glvlmarkcoordinate {#1} {q} {(-1,0)}
    \glvlmarkcoordinate {#1} {qbar} {(-1,0)}
    %%
    \markgeocoordinate {#1}
    {(#1-north)} {(#1-south)}
    {(#1-s)} {(#1-q)}
}

\ctikzsubcircuitactivate{sctkglvlsrlatch}
